{% extends "base.html" %}
{% block title %}MY Account{% endblock %}
{% block content %}

<style>
  .bd-placeholder-img {
    font-size: 1.125rem;
    text-anchor: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }

  @media (min-width: 768px) {
    .bd-placeholder-img-lg {
      font-size: 3.5rem;
    }
  }
</style>
<h1>My Recipe Account</h1>
<h2>Welcome to your recipe page!</h2>
<a id="add_recipe_link" name="add_recipe_link" onclick="showAddRecipe()">Click here to add a recipe</a>
<div id="add_recipe">
    <section class="bg-light">
        <form method = 'POST' class="needs-validation">
            <div>
                <label for="recipe_name" class="form-label">Recipe Name:</label>
                <input type="text" class='form-control' id="recipe_name" name="recipe_name" value="" required>
            </div>
            <div>
                <label for="ingredients">Ingredients:</label>
                <span><button type="button" id="ingredients_new_line" value="+" onclick="newLineIngredients()">+</button></span>
                <span><button type="button" id="ingredients_del_line" value="-" onclick="delLineIngredients()">-</button></span>
                <input type="text" class="form-control" value="" name="ingredients" id="ingredients" required>
            </div>

            <div>
                <label for="instructions">Instructions:</label>
                <span><button type="button" id="instructions_new_line" value="+" onclick="newLineInstructions()">+</button></span>
                <span><button type="button" id="instructions_del_line" value="-" onclick="delLineInstructions()">-</button></span>
                <input type="text" class="form-control" value="" name="instructions" id="instructions" required>

            </div>
            <div>
                <label for="servings">Serves:</label>
                <input type="text" class="form-control" value="" id="servings" name="servings">
            </div>
            <div>
                <label for="review">Review:</label>
                <textarea class="form-control" id="review" name="review"></textarea>
            </div>
            <hr class="my-4">
            <div>
                <legend>Difficulty: </legend>
                <div>
                  <input id="easy" name="difficulty" type="radio" class="form-check-input" checked required>
                  <label class="form-check-label" for="easy">Easy</label>
                </div>
                <div>
                    <input id="moderate" name="difficulty" type="radio" class="form-check-input" checked required>
                    <label class="form-check-label" for="moderate">Moderate</label>
                </div>
                <div>
                  <input id="hard" name="difficulty" type="radio" class="form-check-input" checked required>
                  <label class="form-check-label" for="hard">Hard</label>
                </div>
            </div>
            <label for="image_upload">Add a picture</label>
            <input type="file" id="image_upload" name="image_upload" accept="image/png, image/jpeg">
            <button type="submit" class="w-100 btn btn-primary btn-lg" name = "btn_identifier" id="submit_recipe" value="add_recipe">Submit Recipe</button>
        </form>
    </section>
</div>
    </div>

<a id="del_recipe_link" name="del_recipe_link" onclick="showDelRecipe()">Click here to delete a recipe</a>
<div id="del_recipe">
    <section class="bg-light">
        <form method = 'POST'>
            <div>
                <legend>Choose a recipe to remove: </legend>
            </div>
            {% if all_recipes|length > 0 %}
                {% for recipes in all_recipes %}
                    <input type="checkbox" id="recipe_remove" name="delete_name" value="{{recipes.name}}">{{recipes.name}}<br />
                {% endfor %}
                <button type="submit" id="delete_recipe" name="btn_identifier" value="delete_recipe">Delete Recipe</button>
            {% else %}
                <h3>No Recipes in your account</h3>
            {% endif %}
        </form>
    </section>
</div>

<a id="leave_review" name="leave_review" onclick="showReviews()">Click here to leave a review</a>
<div id="reviews">
    <section class="bg-light">
        <form method = 'POST'>
            <div>
                <legend>Choose a recipe to review: </legend>
            </div>
            {% if all_recipes|length > 0 %}
                {% for recipes in all_recipes %}
                    <input type="radio" id="review_choice" name="review_name" value="{{recipes.name}}">{{recipes.name}}<br />
                {% endfor %}
            {% else %}
                <h3>No Recipes in your account</h3>
            {% endif %}
          <div class="form-check form-check-inline">
            <input type="radio" name="user_rating" value="1" id="1"> 1
          </div>
          <div class="form-check form-check-inline">
            <input type="radio" name="user_rating" value="2" id="2"> 2
          </div>
          <div class="form-check form-check-inline">
            <input type="radio" name="user_rating" value="3" id="3"> 3
          </div>
          <div class="form-check form-check-inline">
            <input type="radio" name="user_rating" value="4" id="4"> 4
          </div>
          <div class="form-check form-check-inline">
            <input type="radio" name="user_rating" value="5" id="5"> 5
          </div>
            <div style="align: center" class="form-label-group">
                <textarea placeholder="Leave your comments here." name="user_review" class="form-control" rows="2"></textarea>
            </div>
            <button type="submit" id="review_choice_btn" name="btn_identifier" value="review_recipe">Submit</button><button type="reset">Reset</button>
        </form>
    </section>
  </div>

<a id="see_reviews" name="see_reviews" onclick="showReviewed()">Click here to see your recipe reviews</a>
<div id="show_reviews">
    <section class="bg-light">
        {% if all_recipes|length > 0 %}
            {% for recipes in all_recipes %}
                {% for reviews in recipes.reviews %}
                    {% if reviews|length > 0 %}
                        <p>{{recipes.name}}: {{reviews[1]}} / 5 STARS</p>
                        <p>Comments: {{reviews[0]}}</p>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        {% else %}
            <h3>No Reviews yet!</h3>
        {% endif %}
    </section>
</div>



{% endblock %}
